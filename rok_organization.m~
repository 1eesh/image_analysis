%% This script calculates the half life of the Rok Plots to be able to show that the half life increases and hence to be able to say that the Rok is diffused and is not centered anymore like it used to be

%% Here we try and get the Covariance as a function of the distance between maximas(basically we try and see whether the maximas in Pearson corelation correspond to the lag equal to the maximal distance


 %%
load('wildtype_rokxmyosin');


%% I tried the average slope but that method faiel

average_slope=[];

for cell_index = 1:cell_number,
    
    average_slope=[average_slope (cell_rok(cell_index).mean(10) - cell_rok(cell_index).mean(1) )/10 ];
    
end

scatter([1:1:cell_number],average_slope);
hy = graph2d.constantline(0, 'Color',[0 0 0]);
changedependvar(hy,'y');




if 0 %% this segment of the code fits a pokynomial to the plot of Rok intensity and then plots the polynomial on to the Rok plot

for cell_index=9:9, %%which cell we are looking at
if(cell(cell_index).average_maxima_distance <=8 ) % this helps us ignore the outliers
  
    if (size(cell_rok(cell_index).mean,1) >25)
        y=cell_rok(cell_index).mean(1:25,:)';
        x=[1:1:25];
        p=polyfit(x,y,7);
    
        f = polyval(p,x);
        plot(x,y,'o',x,f,'-')
    end

    if (size(cell_rok(cell_index).mean,1) <=25)
        y=cell_rok(cell_index).mean(:,:)';
        x=[1:1:size(cell_rok(cell_index).mean,1)];
        p=polyfit(x,y,10);
    
        f = polyval(p,x);
        plot(x,y,'o',x,f,'-')
    end



end %ignoring the outliers

end

end